# Packages vs Shared ç›®å½•å¯¹æ¯”

## ğŸ“Š æ ¸å¿ƒåŒºåˆ«

| ç‰¹æ€§ | Packages | Shared ç›®å½• |
|------|----------|-------------|
| **åŒ…ç®¡ç†ç³»ç»Ÿ** | âœ… é›†æˆ pnpm workspace | âŒ æ— åŒ…ç®¡ç† |
| **ä¾èµ–å£°æ˜** | âœ… æ˜ç¡®çš„ package.json | âŒ éšå¼ä¾èµ– |
| **ç‰ˆæœ¬æ§åˆ¶** | âœ… ç‹¬ç«‹ç‰ˆæœ¬å· | âŒ æ— ç‰ˆæœ¬æ¦‚å¿µ |
| **æ„å»ºç³»ç»Ÿ** | âœ… Turbo è‡ªåŠ¨å¤„ç† | âŒ æ‰‹åŠ¨ç®¡ç† |
| **ç±»å‹ç³»ç»Ÿ** | âœ… å®Œæ•´çš„ TypeScript æ”¯æŒ | âš ï¸ è·¯å¾„æ˜ å°„ |
| **å·¥å…·æ”¯æŒ** | âœ… å®Œæ•´ç”Ÿæ€æ”¯æŒ | âš ï¸ æœ‰é™æ”¯æŒ |
| **å¯é‡ç”¨æ€§** | âœ… æ˜“äºè·¨é¡¹ç›®ä½¿ç”¨ | âŒ é¡¹ç›®ç»‘å®š |
| **æ„å»ºç¼“å­˜** | âœ… Turbo ç¼“å­˜ä¼˜åŒ– | âŒ æ— ç¼“å­˜ |

## ğŸ¯ Packages çš„æ ¸å¿ƒä¼˜åŠ¿

### 1. **åŒ…ç®¡ç†ç³»ç»Ÿé›†æˆ** âœ…

#### Packages (æœ‰ package.json)
```json
{
  "name": "@interview/utils",
  "version": "0.1.0",
  "dependencies": {
    "clsx": "^2.0.0"
  }
}
```

**ä¼˜åŠ¿**:
- âœ… æ˜ç¡®çš„ä¾èµ–å£°æ˜
- âœ… è‡ªåŠ¨ä¾èµ–è§£æ
- âœ… ç‰ˆæœ¬é”å®šæœºåˆ¶
- âœ… ä¾èµ–å†²çªæ£€æµ‹

#### Shared (æ— åŒ…ç®¡ç†)
```typescript
// âŒ ä¾èµ–å…³ç³»ä¸æ˜ç¡®
// âŒ æ— æ³•å£°æ˜å¤–éƒ¨ä¾èµ–
// âŒ ç‰ˆæœ¬ç®¡ç†å›°éš¾
```

---

### 2. **æ„å»ºç³»ç»Ÿæ”¯æŒ** âœ…

#### Packages (Turbo è‡ªåŠ¨å¤„ç†)
```json
// turbo.json
{
  "tasks": {
    "build": {
      "dependsOn": ["^build"],  // è‡ªåŠ¨å¤„ç†ä¾èµ–é¡ºåº
      "outputs": ["dist/**"]
    }
  }
}
```

**ä¼˜åŠ¿**:
- âœ… è‡ªåŠ¨æ„å»ºé¡ºåº (`dependsOn: ["^build"]`)
- âœ… å¹¶è¡Œæ„å»ºä¼˜åŒ–
- âœ… å¢é‡æ„å»ºæ”¯æŒ
- âœ… æ„å»ºç¼“å­˜æœºåˆ¶

#### Shared (æ‰‹åŠ¨ç®¡ç†)
```bash
# âŒ éœ€è¦æ‰‹åŠ¨ç¡®ä¿æ„å»ºé¡ºåº
# âŒ æ— æ³•åˆ©ç”¨æ„å»ºç¼“å­˜
# âŒ æ„å»ºé¡ºåºå®¹æ˜“å‡ºé”™
```

---

### 3. **ä¾èµ–å…³ç³»å›¾** âœ…

#### Packages (è‡ªåŠ¨ä¾èµ–å›¾)
```
@interview/admin
  â”œâ”€â”€ @interview/utils (workspace:*)
  â”œâ”€â”€ @interview/types (workspace:*)
  â””â”€â”€ @interview/constants (workspace:*)

@interview/utils
  â””â”€â”€ clsx (^2.0.0)
```

**ä¼˜åŠ¿**:
- âœ… `pnpm list` æŸ¥çœ‹å®Œæ•´ä¾èµ–æ ‘
- âœ… è‡ªåŠ¨æ£€æµ‹å¾ªç¯ä¾èµ–
- âœ… ä¾èµ–æ›´æ–°å½±å“åˆ†æ
- âœ… æ¸…æ™°çš„ä¾èµ–è¾¹ç•Œ

#### Shared (éšå¼ä¾èµ–)
```
# âŒ ä¾èµ–å…³ç³»ä¸æ˜ç¡®
# âŒ æ— æ³•è¿½è¸ªä¾èµ–é“¾
# âŒ å¾ªç¯ä¾èµ–éš¾ä»¥å‘ç°
```

---

### 4. **ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒ** âœ…

#### Packages (ç‹¬ç«‹ç‰ˆæœ¬)
```json
{
  "name": "@interview/utils",
  "version": "0.1.0"  // å¯ä»¥ç‹¬ç«‹ç‰ˆæœ¬åŒ–
}
```

**ä¼˜åŠ¿**:
- âœ… ä½¿ç”¨ Changesets ç®¡ç†ç‰ˆæœ¬
- âœ… è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- âœ… å¯ä»¥å‘å¸ƒåˆ° npm
- âœ… ç‰ˆæœ¬å›æ»šæ”¯æŒ

#### Shared (æ— ç‰ˆæœ¬)
```typescript
// âŒ æ— æ³•ç‰ˆæœ¬åŒ–
// âŒ æ— æ³•å‘å¸ƒ
// âŒ ç‰ˆæœ¬ç®¡ç†å›°éš¾
```

---

### 5. **TypeScript ç±»å‹ç³»ç»Ÿ** âœ…

#### Packages (å®Œæ•´ç±»å‹æ”¯æŒ)
```typescript
// packages/utils/src/index.ts
export function validateEmail(email: string): boolean {
  // ...
}

// è‡ªåŠ¨ç”Ÿæˆç±»å‹å®šä¹‰
// packages/utils/dist/index.d.ts
```

**ä¼˜åŠ¿**:
- âœ… è‡ªåŠ¨ç”Ÿæˆ `.d.ts` ç±»å‹æ–‡ä»¶
- âœ… ç±»å‹å¯¼å‡ºå®Œæ•´
- âœ… IDE æ™ºèƒ½æç¤ºæ›´å¥½
- âœ… ç±»å‹æ£€æŸ¥æ›´ä¸¥æ ¼

#### Shared (è·¯å¾„æ˜ å°„)
```typescript
// tsconfig.json
{
  "paths": {
    "@shared/*": ["../../shared/*"]  // ç®€å•çš„è·¯å¾„æ˜ å°„
  }
}
```

**åŠ£åŠ¿**:
- âš ï¸ ç±»å‹å®šä¹‰éœ€è¦æ‰‹åŠ¨ç»´æŠ¤
- âš ï¸ IDE æ”¯æŒå¯èƒ½ä¸å®Œæ•´
- âš ï¸ ç±»å‹æ£€æŸ¥å¯èƒ½ä¸å¤Ÿä¸¥æ ¼

---

### 6. **æ„å»ºç¼“å­˜å’Œæ€§èƒ½** âœ…

#### Packages (Turbo ç¼“å­˜)
```bash
# Turbo è‡ªåŠ¨ç¼“å­˜
$ turbo build
âœ“ @interview/utils:build (cache hit)
âœ“ @interview/types:build (cache hit)
âœ“ @interview/admin:build (0.5s)
```

**ä¼˜åŠ¿**:
- âœ… å¢é‡æ„å»ºï¼Œåªæ„å»ºå˜æ›´çš„åŒ…
- âœ… æ„å»ºç»“æœç¼“å­˜
- âœ… CI/CD ä¸­æ˜¾è‘—åŠ é€Ÿ
- âœ… å¹¶è¡Œæ„å»ºä¼˜åŒ–

#### Shared (æ— ç¼“å­˜)
```bash
# âŒ æ¯æ¬¡éƒ½è¦é‡æ–°æ„å»º
# âŒ æ— æ³•åˆ©ç”¨ç¼“å­˜
# âŒ æ„å»ºæ—¶é—´è¾ƒé•¿
```

---

### 7. **å·¥å…·ç”Ÿæ€æ”¯æŒ** âœ…

#### Packages (å®Œæ•´å·¥å…·é“¾)
```bash
# ä¾èµ–åˆ†æ
pnpm why clsx

# ä¾èµ–æ›´æ–°
pnpm update @interview/utils

# ä¾èµ–æ£€æŸ¥
pnpm audit

# åŒ…ä¿¡æ¯
pnpm list --depth=0
```

**ä¼˜åŠ¿**:
- âœ… pnpm å®Œæ•´åŠŸèƒ½æ”¯æŒ
- âœ… Changesets ç‰ˆæœ¬ç®¡ç†
- âœ… Turbo æ„å»ºä¼˜åŒ–
- âœ… å„ç§å·¥å…·åŸç”Ÿæ”¯æŒ

#### Shared (å·¥å…·æ”¯æŒæœ‰é™)
```bash
# âŒ æ— æ³•ä½¿ç”¨åŒ…ç®¡ç†å·¥å…·
# âŒ ä¾èµ–åˆ†æå›°éš¾
# âŒ æ›´æ–°ç®¡ç†ä¸ä¾¿
```

---

### 8. **å¯é‡ç”¨æ€§å’Œè·¨é¡¹ç›®ä½¿ç”¨** âœ…

#### Packages (æ˜“äºé‡ç”¨)
```bash
# åœ¨å…¶ä»–é¡¹ç›®ä¸­å®‰è£…
pnpm add @interview/utils

# æˆ–é€šè¿‡ workspace
"@interview/utils": "workspace:*"
```

**ä¼˜åŠ¿**:
- âœ… å¯ä»¥å‘å¸ƒåˆ° npm
- âœ… å¯ä»¥åœ¨å…¶ä»– monorepo ä¸­ä½¿ç”¨
- âœ… ç‰ˆæœ¬æ§åˆ¶æ¸…æ™°
- âœ… ä¾èµ–ç®¡ç†ç®€å•

#### Shared (é¡¹ç›®ç»‘å®š)
```typescript
// âŒ åªèƒ½é€šè¿‡è·¯å¾„æ˜ å°„ä½¿ç”¨
// âŒ æ— æ³•è·¨é¡¹ç›®é‡ç”¨
// âŒ æ— æ³•å‘å¸ƒ
```

---

### 9. **å¼€å‘å’Œè°ƒè¯•ä½“éªŒ** âœ…

#### Packages (æ›´å¥½çš„å¼€å‘ä½“éªŒ)
```bash
# ç‹¬ç«‹å¼€å‘åŒ…
cd packages/utils
pnpm dev  # ç›‘å¬æ¨¡å¼

# ç‹¬ç«‹æµ‹è¯•
pnpm test

# ç‹¬ç«‹ lint
pnpm lint
```

**ä¼˜åŠ¿**:
- âœ… æ¯ä¸ªåŒ…å¯ä»¥ç‹¬ç«‹å¼€å‘
- âœ… ç‹¬ç«‹çš„å¼€å‘è„šæœ¬
- âœ… æ›´å¥½çš„ä»£ç ç»„ç»‡
- âœ… æ›´å®¹æ˜“å®šä½é—®é¢˜

#### Shared (ç»Ÿä¸€ç®¡ç†)
```bash
# âŒ æ— æ³•ç‹¬ç«‹å¼€å‘
# âŒ éœ€è¦æ‰‹åŠ¨ç®¡ç†è„šæœ¬
# âŒ ä»£ç ç»„ç»‡ä¸å¤Ÿæ¸…æ™°
```

---

### 10. **CI/CD é›†æˆ** âœ…

#### Packages (CI/CD å‹å¥½)
```yaml
# .github/workflows/ci.yml
- name: Build packages
  run: pnpm turbo build --filter='@interview/utils'

- name: Test packages
  run: pnpm turbo test --filter='@interview/utils'
```

**ä¼˜åŠ¿**:
- âœ… å¯ä»¥å•ç‹¬æµ‹è¯•/æ„å»ºåŒ…
- âœ… å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
- âœ… ç¼“å­˜æœºåˆ¶åŠ é€Ÿ
- âœ… æ›´å¥½çš„é”™è¯¯éš”ç¦»

#### Shared (æ•´ä½“æ„å»º)
```yaml
# âŒ æ— æ³•å•ç‹¬æ„å»º
# âŒ ç¼“å­˜æ•ˆæœå·®
# âŒ é”™è¯¯éš”ç¦»å›°éš¾
```

---

## ğŸ“ˆ å®é™…åœºæ™¯å¯¹æ¯”

### åœºæ™¯ 1: æ·»åŠ æ–°ä¾èµ–

#### Packages
```bash
# 1. åœ¨åŒ…çš„ package.json ä¸­æ·»åŠ 
cd packages/utils
pnpm add clsx

# 2. è‡ªåŠ¨æ›´æ–° lockfile
# 3. ä¾èµ–å…³ç³»æ¸…æ™°
```

#### Shared
```bash
# âŒ éœ€è¦åœ¨æ ¹ç›®å½•æ·»åŠ 
# âŒ ä¾èµ–å…³ç³»ä¸æ˜ç¡®
# âŒ å¯èƒ½å½±å“å…¶ä»–åŒ…
```

---

### åœºæ™¯ 2: æ›´æ–°ä¾èµ–

#### Packages
```bash
# åªæ›´æ–°ç‰¹å®šåŒ…
pnpm update @interview/utils

# æŸ¥çœ‹æ›´æ–°å½±å“
pnpm why @interview/utils
```

#### Shared
```bash
# âŒ éœ€è¦æ‰‹åŠ¨æ£€æŸ¥æ‰€æœ‰ä½¿ç”¨å¤„
# âŒ æ›´æ–°å½±å“ä¸æ˜ç¡®
# âŒ å®¹æ˜“é—æ¼
```

---

### åœºæ™¯ 3: æ„å»ºä¼˜åŒ–

#### Packages
```bash
# Turbo è‡ªåŠ¨ä¼˜åŒ–
$ turbo build
âœ“ @interview/utils:build (cache hit, 0.1s)
âœ“ @interview/types:build (cache hit, 0.1s)
âœ“ @interview/admin:build (0.5s)

# æ€»æ—¶é—´: 0.7s (åˆ©ç”¨ç¼“å­˜)
```

#### Shared
```bash
# âŒ æ¯æ¬¡å®Œæ•´æ„å»º
$ build
âœ“ Building all... (5.2s)

# æ€»æ—¶é—´: 5.2s (æ— ç¼“å­˜)
```

---

### åœºæ™¯ 4: è·¨é¡¹ç›®ä½¿ç”¨

#### Packages
```bash
# é¡¹ç›® A
pnpm add @interview/utils@^0.1.0

# é¡¹ç›® B (å¦ä¸€ä¸ª monorepo)
pnpm add @interview/utils@^0.1.0
```

#### Shared
```typescript
// âŒ éœ€è¦å¤åˆ¶ä»£ç 
// âŒ æ— æ³•ç‰ˆæœ¬ç®¡ç†
// âŒ ç»´æŠ¤å›°éš¾
```

---

## ğŸ¯ æ€»ç»“

### Packages çš„æ ¸å¿ƒä»·å€¼

1. **å·¥ç¨‹åŒ–**: å®Œæ•´çš„åŒ…ç®¡ç†ã€æ„å»ºã€æµ‹è¯•ä½“ç³»
2. **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„ä¾èµ–å…³ç³»ã€ç‰ˆæœ¬æ§åˆ¶
3. **æ€§èƒ½**: æ„å»ºç¼“å­˜ã€å¹¶è¡Œä¼˜åŒ–
4. **å¯æ‰©å±•æ€§**: æ˜“äºè·¨é¡¹ç›®é‡ç”¨ã€å‘å¸ƒ
5. **å·¥å…·æ”¯æŒ**: å®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ

### Shared çš„å±€é™æ€§

1. **æ— åŒ…ç®¡ç†**: ä¾èµ–å…³ç³»ä¸æ˜ç¡®
2. **æ— æ„å»ºä¼˜åŒ–**: æ— æ³•åˆ©ç”¨ç¼“å­˜
3. **é¡¹ç›®ç»‘å®š**: éš¾ä»¥è·¨é¡¹ç›®é‡ç”¨
4. **å·¥å…·æ”¯æŒæœ‰é™**: æ— æ³•ä½¿ç”¨å®Œæ•´çš„å·¥å…·é“¾

## âœ… ç»“è®º

**Packages æ˜¯ monorepo çš„æ ‡å‡†åšæ³•**ï¼Œæä¾›äº†ï¼š
- âœ… æ›´å¥½çš„å·¥ç¨‹åŒ–æ”¯æŒ
- âœ… æ›´é«˜çš„å¼€å‘æ•ˆç‡
- âœ… æ›´å¼ºçš„å¯ç»´æŠ¤æ€§
- âœ… æ›´å¥½çš„å·¥å…·ç”Ÿæ€é›†æˆ

**Shared ç›®å½•é€‚åˆ**ï¼š
- âš ï¸ éå¸¸ç®€å•çš„é¡¹ç›®
- âš ï¸ ä¸éœ€è¦ç‰ˆæœ¬ç®¡ç†çš„ä»£ç 
- âš ï¸ ä¸´æ—¶æ€§çš„å…±äº«ä»£ç 

**å¯¹äºç”Ÿäº§çº§é¡¹ç›®ï¼ŒPackages æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼** ğŸ‰
